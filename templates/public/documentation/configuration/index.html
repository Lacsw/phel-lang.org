<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  
    <title>Configuration | The Phel Language</title>
    <meta property="og:title" content="Configuration | The Phel Language" />


  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="The offical website of the Phel language. Phel is a functional programming language that compiles to PHP.">

  <link rel="stylesheet" href="https:&#x2F;&#x2F;phel-lang.org&#x2F;site.css"/>
  <link rel="alternate icon" type="image/png" href="/favicon-32.png">

  <meta property="og:description" content="The offical website of the Phel language. Phel is a functional programming language that compiles to PHP." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://phel-lang.org/" />
  <meta property="og:image" content="https://phel-lang.org/favicon-512.png" />
  <meta property="og:image:width" content="512" />
  <meta property="og:image:height" content="512" />
</head>

<body>
  
<div class="documentation">
    <aside class="documentation__sidebar">
        <div class="logo">
            <a href="/">
    <svg class="phel-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200.3 167.7"><path d="M6 66l95 96h36V93l-36-74H42L6 56v106h36l24-35"/><path d="M137 93l58-3-12-58-32-26h-34l-16 13-23 9-12 22 46 52z"/><path d="M195 90l-12 57h-13l-2-56M170 147l-13-11h12"/></svg>
</a>
        </div>

        <input type="checkbox" id="menu_checkbox">
        <label for="menu_checkbox">
            <svg viewBox="0 0 32 32">
                <path d="M3,3 29,3 M3,16 29,16 M3,29 29,29"></path>
            </svg>
            Menu
        </label>
        <nav>
            <ol>
                <li class="">
                    <a href="/">About Phel</a>
                </li>
                
                
                    <li class="">
                        <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;documentation&#x2F;getting-started&#x2F;">Getting started</a>
                    </li>
                
                    <li class="">
                        <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;documentation&#x2F;basic-types&#x2F;">Basic Types</a>
                    </li>
                
                    <li class="">
                        <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;documentation&#x2F;numbers-and-arithmetic&#x2F;">Numbers and Arithmetic</a>
                    </li>
                
                    <li class="">
                        <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;documentation&#x2F;truth-and-boolean-operations&#x2F;">Truth and Boolean operations</a>
                    </li>
                
                    <li class="">
                        <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;documentation&#x2F;control-flow&#x2F;">Control flow</a>
                    </li>
                
                    <li class="">
                        <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;documentation&#x2F;global-and-local-bindings&#x2F;">Global and local bindings</a>
                    </li>
                
                    <li class="">
                        <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;documentation&#x2F;functions-and-recursion&#x2F;">Functions and Recursion</a>
                    </li>
                
                    <li class="">
                        <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;documentation&#x2F;data-structures&#x2F;">Data structures</a>
                    </li>
                
                    <li class="">
                        <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;documentation&#x2F;destructuring&#x2F;">Destructuring</a>
                    </li>
                
                    <li class="">
                        <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;documentation&#x2F;macros&#x2F;">Macros</a>
                    </li>
                
                    <li class="">
                        <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;documentation&#x2F;namespaces&#x2F;">Namespaces</a>
                    </li>
                
                    <li class="">
                        <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;documentation&#x2F;php-interop&#x2F;">PHP Interop</a>
                    </li>
                
                    <li class="">
                        <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;documentation&#x2F;http-request-and-response&#x2F;">Request and Response</a>
                    </li>
                
                    <li class="">
                        <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;documentation&#x2F;html-rendering&#x2F;">HTML Rendering</a>
                    </li>
                
                    <li class="">
                        <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;documentation&#x2F;testing&#x2F;">Testing</a>
                    </li>
                
                    <li class="active">
                        <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;documentation&#x2F;configuration&#x2F;">Configuration</a>
                    </li>
                
                    <li class="">
                        <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;documentation&#x2F;repl&#x2F;">REPL</a>
                    </li>
                
                    <li class="">
                        <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;documentation&#x2F;api&#x2F;">API</a>
                    </li>
                
                    <li class="">
                        <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;documentation&#x2F;in-the-wild&#x2F;">In the wild</a>
                    </li>
                
            </ol>

            <ul>
                <li><a href="https://github.com/phel-lang/phel-lang">Source on Github</a></li>
            </ul>
        </nav>
    </aside>
    <div class="documentation__content">
        
    <h1>Configuration</h1>
    <p>Phel comes with some configuration options. They are stored in the <code>composer.json</code> file in the <code>extra</code> section.</p>
<h2 id="structure">Structure<a class="zola-anchor" href="#structure" aria-label="Anchor link for: structure">#</a>
</h2>
<p>These are all Phel specific configuration options available.</p>
<pre style="background-color:#ffffff;">
<code class="language-json" data-lang="json"><span style="color:#4d4d4c;">&quot;extra&quot;: {
    &quot;phel&quot;: {
        &quot;loader&quot;: {
            &quot;hello-world\\&quot;: &quot;src/&quot;
        },
        &quot;loader-dev&quot;: {
            &quot;hello-world\\tests\\&quot;: &quot;tests/&quot;
        },
        &quot;tests&quot;: [
            &quot;tests/&quot;
        ],
        &quot;export&quot;: {
            &quot;directories&quot;: [
                &quot;src/phel&quot;
            ],
            &quot;namespace-prefix&quot;: &quot;PhelGenerated&quot;,
            &quot;target-directory&quot;: &quot;src/PhelGenerated&quot;
        }
    }
}
</span></code></pre><h2 id="options-in-detail">Options in detail<a class="zola-anchor" href="#options-in-detail" aria-label="Anchor link for: options-in-detail">#</a>
</h2>
<p>This chapter contains all configuration options explained in detail.</p>
<h3 id="loader"><code>loader</code><a class="zola-anchor" href="#loader" aria-label="Anchor link for: loader">#</a>
</h3>
<p>Autoload mapping for a Phel autoloader.</p>
<p>The <code>loader</code> configuration defines a mapping from namespaces to paths. The paths are relative to the package root. When autoloading a module like <code>hello-world\boot</code> a namespace prefix <code>hello-world</code> pointing to a directory <code>src/</code> means that the autoloader will look for a file named <code>src/boot.phel</code> and include it if present.</p>
<p>Namespace prefixes must end with a backslash (<code>\\</code>) to avoid conflicts between similar prefixes. For example <code>hello</code> would match modules in the <code>hello-world</code> namespace so the trailing backslashes solve the problem: <code>hello\\</code> and <code>hello-world\\</code> are distinct.</p>
<p>The <code>loader</code> references are all added whenever a package is updated or installed, to the Phel Runtime which can be found in the generated file <code>vendor/PhelRuntime.php</code>.</p>
<h3 id="loader-dev"><code>loader-dev</code><a class="zola-anchor" href="#loader-dev" aria-label="Anchor link for: loader-dev">#</a>
</h3>
<p>This section allows us to define autoload rules for development purposes.</p>
<p>Modules needed to run the test suite should not be included in the main autoload rules to avoid polluting the autoloader in production and when other people use the package as a dependency. Therefore, it is a good idea to rely on a dedicated path for your unit tests and to add it within the <code>loader-dev</code> section.</p>
<p>The <code>loader-dev</code> configuration section is equivalent to the <code>loader</code> configuration section. Namespaces and paths are defined in the same way.</p>
<h3 id="tests"><code>tests</code><a class="zola-anchor" href="#tests" aria-label="Anchor link for: tests">#</a>
</h3>
<p>This configuration entry defines a list of folders where the test files of a project can be found.</p>
<h3 id="export"><code>export</code><a class="zola-anchor" href="#export" aria-label="Anchor link for: export">#</a>
</h3>
<p>These configuration options are used for the Phel export command that is described in the <a href="/documentation/php-interop/#calling-phel-functions-from-php">PHP Interop</a> chapter. Currently, the export command requires three options:</p>
<ul>
<li><code>directories</code>: Defines a list of directories in which the export command should search for export functions.</li>
<li><code>namespace-prefix</code>: Defines a namespace prefix for all generated PHP classes.</li>
<li><code>target-directory</code>: Defines the directory where the generated PHP classes are stored.</li>
</ul>
<h2 id="phel-composer-plugin">Phel Composer Plugin<a class="zola-anchor" href="#phel-composer-plugin" aria-label="Anchor link for: phel-composer-plugin">#</a>
</h2>
<p>Phel Runtime is configured automatically by the plugin. Whenever a package is updated or installed a file is generated in <code>vendor/PhelRuntime.php</code>. This file initializes the Phel Runtime according to the defined <code>loader</code> and <code>loader-dev</code> configuration options.</p>
<p>The generated Runtime can be loaded like this.</p>
<pre style="background-color:#ffffff;">
<code class="language-php" data-lang="php"><span style="color:#4d4d4c;">// src/index.php
&lt;?php

$rt = require __DIR__ .&#39;/../vendor/PhelRuntime.php&#39;;

$rt-&gt;loadNs(&#39;hello-world\boot&#39;);
</span></code></pre>
<p>The source of <a href="https://github.com/phel-lang/phel-composer-plugin">Phel's composer plugin</a> can be found in a separate repository.</p>
<h2 id="manually-initializing-and-configuring-the-runtime">Manually initializing and configuring the Runtime<a class="zola-anchor" href="#manually-initializing-and-configuring-the-runtime" aria-label="Anchor link for: manually-initializing-and-configuring-the-runtime">#</a>
</h2>
<p>It is possible to manually initialize and configure the Runtime as shown in this example.</p>
<pre style="background-color:#ffffff;">
<code class="language-php" data-lang="php"><span style="color:#4d4d4c;">// src/index.php
&lt;?php

use Phel\Runtime\RuntimeSingleton;

require __DIR__ .&#39;/../vendor/autoload.php&#39;;

$rt = RuntimeSingleton::initialize();
$rt-&gt;addPath(&#39;hello-world\\&#39;, [__DIR__]);

$rt-&gt;loadNs(&#39;phel\core&#39;);
$rt-&gt;loadNs(&#39;hello-world\boot&#39;);
</span></code></pre>


        <footer>
    &copy; <time datetime="2020">2020</time> Jens Haase
    <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;legal&#x2F;disclosure&#x2F;">Legal Disclosure</a> | <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;legal&#x2F;data-protection&#x2F;">Data protection</a>
</footer>
    </div>
</div>

</body>

</html>
