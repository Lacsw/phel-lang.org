<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  
    <title>Data structures | The Phel Language</title>
    <meta property="og:title" content="Data structures | The Phel Language" />


  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="The offical website of the Phel language. Phel is a functional programming language that compiles to PHP.">

  <link rel="stylesheet" href="https:&#x2F;&#x2F;phel-lang.org&#x2F;site.css"/>
  <link rel="alternate icon" type="image/png" href="/favicon-32.png">

  <meta property="og:description" content="The offical website of the Phel language. Phel is a functional programming language that compiles to PHP." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://phel-lang.org/" />
  <meta property="og:image" content="https://phel-lang.org/favicon-512.png" />
  <meta property="og:image:width" content="512" />
  <meta property="og:image:height" content="512" />
</head>

<body>
  
<div class="documentation">
    <aside class="documentation__sidebar">
        <div class="logo">
            <a href="/">
    <svg class="phel-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200.3 167.7"><path d="M6 66l95 96h36V93l-36-74H42L6 56v106h36l24-35"/><path d="M137 93l58-3-12-58-32-26h-34l-16 13-23 9-12 22 46 52z"/><path d="M195 90l-12 57h-13l-2-56M170 147l-13-11h12"/></svg>
</a>
        </div>

        <input type="checkbox" id="menu_checkbox">
        <label for="menu_checkbox">
            <svg viewBox="0 0 32 32">
                <path d="M3,3 29,3 M3,16 29,16 M3,29 29,29"></path>
            </svg>
            Menu
        </label>
        <nav>
            <ol>
                <li class="">
                    <a href="/">About Phel</a>
                </li>
                
                
                    <li class="">
                        <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;documentation&#x2F;getting-started&#x2F;">Getting started</a>
                    </li>
                
                    <li class="">
                        <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;documentation&#x2F;basic-types&#x2F;">Basic Types</a>
                    </li>
                
                    <li class="">
                        <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;documentation&#x2F;numbers-and-arithmetic&#x2F;">Numbers and Arithmetic</a>
                    </li>
                
                    <li class="">
                        <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;documentation&#x2F;truth-and-boolean-operations&#x2F;">Truth and Boolean operations</a>
                    </li>
                
                    <li class="">
                        <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;documentation&#x2F;control-flow&#x2F;">Control flow</a>
                    </li>
                
                    <li class="">
                        <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;documentation&#x2F;global-and-local-bindings&#x2F;">Global and local bindings</a>
                    </li>
                
                    <li class="">
                        <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;documentation&#x2F;functions-and-recursion&#x2F;">Functions and Recursion</a>
                    </li>
                
                    <li class="active">
                        <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;documentation&#x2F;data-structures&#x2F;">Data structures</a>
                    </li>
                
                    <li class="">
                        <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;documentation&#x2F;destructuring&#x2F;">Destructuring</a>
                    </li>
                
                    <li class="">
                        <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;documentation&#x2F;macros&#x2F;">Macros</a>
                    </li>
                
                    <li class="">
                        <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;documentation&#x2F;namespaces&#x2F;">Namespaces</a>
                    </li>
                
                    <li class="">
                        <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;documentation&#x2F;php-interop&#x2F;">PHP Interop</a>
                    </li>
                
                    <li class="">
                        <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;documentation&#x2F;http-request-and-response&#x2F;">Request and Response</a>
                    </li>
                
                    <li class="">
                        <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;documentation&#x2F;html-rendering&#x2F;">HTML Rendering</a>
                    </li>
                
                    <li class="">
                        <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;documentation&#x2F;testing&#x2F;">Testing</a>
                    </li>
                
                    <li class="">
                        <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;documentation&#x2F;configuration&#x2F;">Configuration</a>
                    </li>
                
                    <li class="">
                        <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;documentation&#x2F;repl&#x2F;">REPL</a>
                    </li>
                
                    <li class="">
                        <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;documentation&#x2F;api&#x2F;">API</a>
                    </li>
                
                    <li class="">
                        <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;documentation&#x2F;in-the-wild&#x2F;">In the wild</a>
                    </li>
                
            </ol>

            <ul>
                <li><a href="https://github.com/phel-lang/phel-lang">Source on Github</a></li>
            </ul>
        </nav>
    </aside>
    <div class="documentation__content">
        
    <h1>Data structures</h1>
    <p>Phel has four main data structures. All data structures are persistent data structures. A persistent data structure preserves the previous version of itself when it is modified. Such data structures are also called immutable data structures. The difference of persistent data structures and immutable data structures is that immutable data structures copy the whole data structure, while persistent data structures share unmodified values with their previous versions.</p>
<h2 id="lists">Lists<a class="zola-anchor" href="#lists" aria-label="Anchor link for: lists">#</a>
</h2>
<p>A persistent list is simple a linked list. Access or modifications on the first element is efficient, random access is not. In Phel, a list has a special meaning. They are interpreted as function calls, macro calls or special forms by the compiler.</p>
<p>To create a list surrond the white space separeted values with parentheses or use the <code>list</code> function.</p>
<pre style="background-color:#ffffff;">
<code class="language-phel" data-lang="phel"><span style="color:#4d4d4c;">(</span><span style="color:#8959a8;">do </span><span style="color:#f5871f;">1 2 3</span><span style="color:#4d4d4c;">) </span><span style="color:#999999;"># list with 4 entries
</span><span style="color:#4d4d4c;">(</span><span style="color:#8959a8;">list </span><span style="color:#f5871f;">1 2 3</span><span style="color:#4d4d4c;">) </span><span style="color:#999999;"># use the list function to create a new list
</span><span style="color:#4d4d4c;">&#39;(</span><span style="color:#f5871f;">1 2 3</span><span style="color:#4d4d4c;">) </span><span style="color:#999999;"># use a quote to create a list
</span></code></pre>
<p>To access values in a list the functions <code>get</code>, <code>first</code>, <code>second</code>, <code>next</code> and <code>rest</code> can be used.</p>
<pre style="background-color:#ffffff;">
<code class="language-phel" data-lang="phel"><span style="color:#4d4d4c;">(get (</span><span style="color:#8959a8;">list </span><span style="color:#f5871f;">1 2 3</span><span style="color:#4d4d4c;">) </span><span style="color:#f5871f;">0</span><span style="color:#4d4d4c;">) </span><span style="color:#999999;"># Evaluates to 1
</span><span style="color:#4d4d4c;">(first (</span><span style="color:#8959a8;">list </span><span style="color:#f5871f;">1 2 3</span><span style="color:#4d4d4c;">)) </span><span style="color:#999999;"># Evaluates to 1
</span><span style="color:#4d4d4c;">(second (</span><span style="color:#8959a8;">list </span><span style="color:#f5871f;">1 2 3</span><span style="color:#4d4d4c;">)) </span><span style="color:#999999;"># Evaluates to 2
</span><span style="color:#4d4d4c;">(next (</span><span style="color:#8959a8;">list </span><span style="color:#f5871f;">1 2 3</span><span style="color:#4d4d4c;">)) </span><span style="color:#999999;"># Evaluates to (2 3)
</span><span style="color:#4d4d4c;">(next (</span><span style="color:#8959a8;">list</span><span style="color:#4d4d4c;">)) </span><span style="color:#999999;"># Evaluates to nil
</span><span style="color:#4d4d4c;">(rest (</span><span style="color:#8959a8;">list </span><span style="color:#f5871f;">1 2 3</span><span style="color:#4d4d4c;">)) </span><span style="color:#999999;"># Evaluates to (2 3)
</span><span style="color:#4d4d4c;">(rest (</span><span style="color:#8959a8;">list</span><span style="color:#4d4d4c;">)) </span><span style="color:#999999;"># Evaluates to ()
</span></code></pre>
<p>New values can only be added to the front of the list with the <code>cons</code> function.</p>
<pre style="background-color:#ffffff;">
<code class="language-phel" data-lang="phel"><span style="color:#4d4d4c;">(cons </span><span style="color:#f5871f;">1 </span><span style="color:#4d4d4c;">(</span><span style="color:#8959a8;">list</span><span style="color:#4d4d4c;">)) </span><span style="color:#999999;"># Evaluates to (1)
</span><span style="color:#4d4d4c;">(cons </span><span style="color:#f5871f;">3 </span><span style="color:#4d4d4c;">(</span><span style="color:#8959a8;">list </span><span style="color:#f5871f;">1 2</span><span style="color:#4d4d4c;">)) </span><span style="color:#999999;"># Evaluates to (3 1 2)
</span></code></pre>
<p>To get the length of the list the <code>count</code> function can be used</p>
<pre style="background-color:#ffffff;">
<code class="language-phel" data-lang="phel"><span style="color:#4d4d4c;">(count (</span><span style="color:#8959a8;">list</span><span style="color:#4d4d4c;">)) </span><span style="color:#999999;"># Evaluates to 0
</span><span style="color:#4d4d4c;">(count (</span><span style="color:#8959a8;">list </span><span style="color:#f5871f;">1 2 3</span><span style="color:#4d4d4c;">)) </span><span style="color:#999999;"># Evaluates to 3
</span></code></pre><h2 id="vectors">Vectors<a class="zola-anchor" href="#vectors" aria-label="Anchor link for: vectors">#</a>
</h2>
<p>Vectors are an indexed, sequential data structure. They offer efficient random access (by index) and are very efficient in appending values at the end.</p>
<p>To create a vector wrap the white space seperated values with brackets or use the <code>vector</code> function.</p>
<pre style="background-color:#ffffff;">
<code class="language-phel" data-lang="phel"><span style="color:#4d4d4c;">[</span><span style="color:#f5871f;">1 2 3</span><span style="color:#4d4d4c;">] </span><span style="color:#999999;"># Creates a new vector with three values
</span><span style="color:#4d4d4c;">(</span><span style="color:#8959a8;">vector </span><span style="color:#f5871f;">1 2 3</span><span style="color:#4d4d4c;">) </span><span style="color:#999999;"># Creates a new vector with three values
</span></code></pre>
<p>To get a value by it's index use the <code>get</code> function. Similar to list you can use the <code>first</code> and <code>second</code> function to access the first or second values of the vector.</p>
<pre style="background-color:#ffffff;">
<code class="language-phel" data-lang="phel"><span style="color:#4d4d4c;">(get [</span><span style="color:#f5871f;">1 2 3</span><span style="color:#4d4d4c;">] </span><span style="color:#f5871f;">0</span><span style="color:#4d4d4c;">) </span><span style="color:#999999;"># Evaluates to 1
</span><span style="color:#4d4d4c;">(first [</span><span style="color:#f5871f;">1 2 3</span><span style="color:#4d4d4c;">]) </span><span style="color:#999999;"># Evaluates to 1
</span><span style="color:#4d4d4c;">(second [</span><span style="color:#f5871f;">1 2 3</span><span style="color:#4d4d4c;">]) </span><span style="color:#999999;"># Evaluates to 2
</span></code></pre>
<p>New values can be appended by using the <code>push</code> function.</p>
<pre style="background-color:#ffffff;">
<code class="language-phel" data-lang="phel"><span style="color:#4d4d4c;">(push [</span><span style="color:#f5871f;">1 2 3</span><span style="color:#4d4d4c;">] </span><span style="color:#f5871f;">4</span><span style="color:#4d4d4c;">) </span><span style="color:#999999;"># Evaluates to [1 2 3 4]
</span></code></pre>
<p>To change an exsting value use the <code>put</code> function</p>
<pre style="background-color:#ffffff;">
<code class="language-phel" data-lang="phel"><span style="color:#4d4d4c;">(put [</span><span style="color:#f5871f;">1 2 3</span><span style="color:#4d4d4c;">] </span><span style="color:#f5871f;">0 4</span><span style="color:#4d4d4c;">) </span><span style="color:#999999;"># Evaluates to [4 2 3]
</span><span style="color:#4d4d4c;">(put [</span><span style="color:#f5871f;">1 2 3</span><span style="color:#4d4d4c;">] </span><span style="color:#f5871f;">3 4</span><span style="color:#4d4d4c;">) </span><span style="color:#999999;"># Evaluates to [1 2 3 4]
</span></code></pre>
<p>A vector can be counted using the <code>count</code> function.</p>
<pre style="background-color:#ffffff;">
<code class="language-phel" data-lang="phel"><span style="color:#4d4d4c;">(count []) </span><span style="color:#999999;"># Evaluates to 0
</span><span style="color:#4d4d4c;">(count [</span><span style="color:#f5871f;">1 2 3</span><span style="color:#4d4d4c;">]) </span><span style="color:#999999;"># Evaluates to 3
</span></code></pre><h2 id="maps">Maps<a class="zola-anchor" href="#maps" aria-label="Anchor link for: maps">#</a>
</h2>
<p>A Map contains key-value-pairs in random order. Each possible key appears at most once in the collection. In contrast to PHP's associative arrays, Phel Maps can have any type of keys that implement the <code>HashableInterface</code> and the <code>EqualsInterface</code>.</p>
<p>To create a map wrap the key and values in curly brackets or use the <code>hash-map</code> function.</p>
<pre style="background-color:#ffffff;">
<code class="language-phel" data-lang="phel"><span style="color:#4d4d4c;">{</span><span style="color:#3e999f;">:key1</span><span style="color:#4d4d4c;"> value1 </span><span style="color:#3e999f;">:key2</span><span style="color:#4d4d4c;"> value2} </span><span style="color:#999999;"># Create a new map with two key-value-pairs
</span><span style="color:#4d4d4c;">(</span><span style="color:#8959a8;">hash-map </span><span style="color:#3e999f;">:key1</span><span style="color:#4d4d4c;"> value1 </span><span style="color:#3e999f;">:key2</span><span style="color:#4d4d4c;"> value2) </span><span style="color:#999999;"># Create a new map using the hash-map function
</span></code></pre>
<p>Use the <code>get</code> function to access a value by it's key</p>
<pre style="background-color:#ffffff;">
<code class="language-phel" data-lang="phel"><span style="color:#4d4d4c;">(get {</span><span style="color:#3e999f;">:a </span><span style="color:#f5871f;">1 </span><span style="color:#3e999f;">:b </span><span style="color:#f5871f;">2</span><span style="color:#4d4d4c;">} </span><span style="color:#3e999f;">:a</span><span style="color:#4d4d4c;">) </span><span style="color:#999999;"># Evaluates to 1
</span><span style="color:#4d4d4c;">(get {</span><span style="color:#3e999f;">:a </span><span style="color:#f5871f;">1 </span><span style="color:#3e999f;">:b </span><span style="color:#f5871f;">2</span><span style="color:#4d4d4c;">} </span><span style="color:#3e999f;">:b</span><span style="color:#4d4d4c;">) </span><span style="color:#999999;"># Evaluates to 2
</span><span style="color:#4d4d4c;">(get {</span><span style="color:#3e999f;">:a </span><span style="color:#f5871f;">1 </span><span style="color:#3e999f;">:b </span><span style="color:#f5871f;">2</span><span style="color:#4d4d4c;">} </span><span style="color:#3e999f;">:c</span><span style="color:#4d4d4c;">) </span><span style="color:#999999;"># Evaluates to nil
</span></code></pre>
<p>To add or update a key-value pair in the map use the <code>put</code> function</p>
<pre style="background-color:#ffffff;">
<code class="language-phel" data-lang="phel"><span style="color:#4d4d4c;">(put {} </span><span style="color:#3e999f;">:a </span><span style="color:#718c00;">&quot;hello&quot;</span><span style="color:#4d4d4c;">) </span><span style="color:#999999;"># Evaluates to {:a &quot;hello&quot;}
</span><span style="color:#4d4d4c;">(put {</span><span style="color:#3e999f;">:a </span><span style="color:#718c00;">&quot;foo&quot;</span><span style="color:#4d4d4c;">} </span><span style="color:#3e999f;">:a </span><span style="color:#718c00;">&quot;bar&quot;</span><span style="color:#4d4d4c;">) </span><span style="color:#999999;"># Evaluates to {:a &quot;bar&quot;}
</span></code></pre>
<p>A value in a map can be removed with the <code>unset</code> function</p>
<pre style="background-color:#ffffff;">
<code class="language-phel" data-lang="phel"><span style="color:#4d4d4c;">(unset {</span><span style="color:#3e999f;">:a </span><span style="color:#718c00;">&quot;foo&quot;</span><span style="color:#4d4d4c;">} </span><span style="color:#3e999f;">:a</span><span style="color:#4d4d4c;">) </span><span style="color:#999999;"># Evaluates to {}
</span></code></pre>
<p>As in the other data structures, the <code>count</code> function can be used to count the key-value-pairs.</p>
<pre style="background-color:#ffffff;">
<code class="language-phel" data-lang="phel"><span style="color:#4d4d4c;">(count {}) </span><span style="color:#999999;"># Evaluates to 0
</span><span style="color:#4d4d4c;">(count {</span><span style="color:#3e999f;">:a </span><span style="color:#718c00;">&quot;foo&quot;</span><span style="color:#4d4d4c;">}) </span><span style="color:#999999;"># Evaluates to 1
</span></code></pre><h2 id="structs">Structs<a class="zola-anchor" href="#structs" aria-label="Anchor link for: structs">#</a>
</h2>
<p>A Struct is a special kind of Map. It only supports a predefined number of keys and is associated to a global name. The Struct not only defines itself but also a predicate function.</p>
<pre style="background-color:#ffffff;">
<code class="language-phel" data-lang="phel"><span style="color:#4d4d4c;">(</span><span style="color:#8959a8;">defstruct</span><span style="color:#4d4d4c;"> my-struct [a b c]) </span><span style="color:#999999;"># Defines the struct
</span><span style="color:#4d4d4c;">(</span><span style="color:#8959a8;">let </span><span style="color:#4d4d4c;">[x (my-struct </span><span style="color:#f5871f;">1 2 3</span><span style="color:#4d4d4c;">)] </span><span style="color:#999999;"># Create a new struct
  </span><span style="color:#4d4d4c;">(my-struct? x) </span><span style="color:#999999;"># Evaluates to true
  </span><span style="color:#4d4d4c;">(get x </span><span style="color:#3e999f;">:a</span><span style="color:#4d4d4c;">) </span><span style="color:#999999;"># Evaluates to 1
  </span><span style="color:#4d4d4c;">(put x </span><span style="color:#3e999f;">:a </span><span style="color:#f5871f;">12</span><span style="color:#4d4d4c;">) </span><span style="color:#999999;"># Evaluates to (my-struct 12 2 3)
</span></code></pre>
<p>Internally, Phel Structs are PHP classes where each key correspondence to a object property. Therefore, Structs can be faster than Maps.</p>
<h2 id="sets">Sets<a class="zola-anchor" href="#sets" aria-label="Anchor link for: sets">#</a>
</h2>
<p>A Set contains unique values in random order. All types of values are allowed that implement the <code>HashableInterface</code> and the <code>EqualsInterface</code>.</p>
<p>A new set can be created by using the <code>set</code> function</p>
<pre style="background-color:#ffffff;">
<code class="language-phel" data-lang="phel"><span style="color:#4d4d4c;">(</span><span style="color:#8959a8;">set </span><span style="color:#f5871f;">1 2 3</span><span style="color:#4d4d4c;">) </span><span style="color:#999999;"># Creates a new set with three values
</span></code></pre>
<p>The <code>push</code> function can be used to add a new value to the Set.</p>
<pre style="background-color:#ffffff;">
<code class="language-phel" data-lang="phel"><span style="color:#4d4d4c;">(push (</span><span style="color:#8959a8;">set </span><span style="color:#f5871f;">1 2 3</span><span style="color:#4d4d4c;">) </span><span style="color:#f5871f;">4</span><span style="color:#4d4d4c;">) </span><span style="color:#999999;"># Evaluates to (set 1 2 3 4)
</span><span style="color:#4d4d4c;">(push (</span><span style="color:#8959a8;">set </span><span style="color:#f5871f;">1 2 3</span><span style="color:#4d4d4c;">) </span><span style="color:#f5871f;">2</span><span style="color:#4d4d4c;">) </span><span style="color:#999999;"># Evaluates to (set 1 2 3)
</span></code></pre>
<p>Similar to the Map the <code>unset</code> function can be used to remove a value from the list</p>
<pre style="background-color:#ffffff;">
<code class="language-phel" data-lang="phel"><span style="color:#4d4d4c;">(unset (</span><span style="color:#8959a8;">set </span><span style="color:#f5871f;">1 2 3</span><span style="color:#4d4d4c;">) </span><span style="color:#f5871f;">2</span><span style="color:#4d4d4c;">) </span><span style="color:#999999;"># Evaluates to (set 1 3)
</span></code></pre>
<p>Again the <code>count</code> function can be used to count the elements in the set</p>
<pre style="background-color:#ffffff;">
<code class="language-phel" data-lang="phel"><span style="color:#4d4d4c;">(count (</span><span style="color:#8959a8;">set</span><span style="color:#4d4d4c;">)) </span><span style="color:#999999;"># Evaluates to 0
</span><span style="color:#4d4d4c;">(count (</span><span style="color:#8959a8;">set </span><span style="color:#f5871f;">2</span><span style="color:#4d4d4c;">)) </span><span style="color:#999999;"># Evaluates to 1
</span></code></pre>
<p>Additionally, the union of a collection of sets is the set of all elements in the collection.</p>
<pre style="background-color:#ffffff;">
<code class="language-phel" data-lang="phel"><span style="color:#4d4d4c;">(union) </span><span style="color:#999999;"># Evaluates to (set)
</span><span style="color:#4d4d4c;">(union (</span><span style="color:#8959a8;">set </span><span style="color:#f5871f;">1 2</span><span style="color:#4d4d4c;">)) </span><span style="color:#999999;"># Evaluates to (set 1 2)
</span><span style="color:#4d4d4c;">(union (</span><span style="color:#8959a8;">set </span><span style="color:#f5871f;">1 2</span><span style="color:#4d4d4c;">) (</span><span style="color:#8959a8;">set </span><span style="color:#f5871f;">0 3</span><span style="color:#4d4d4c;">)) </span><span style="color:#999999;"># Evaluates to (set 0 1 2 3)
</span></code></pre>
<p>The intersection of two sets or more is the set containing all elements shared between those sets.</p>
<pre style="background-color:#ffffff;">
<code class="language-phel" data-lang="phel"><span style="color:#4d4d4c;">(intersection (</span><span style="color:#8959a8;">set </span><span style="color:#f5871f;">1 2</span><span style="color:#4d4d4c;">) (</span><span style="color:#8959a8;">set </span><span style="color:#f5871f;">0 3</span><span style="color:#4d4d4c;">)) </span><span style="color:#999999;"># Evaluates to (set)
</span><span style="color:#4d4d4c;">(intersection (</span><span style="color:#8959a8;">set </span><span style="color:#f5871f;">1 2</span><span style="color:#4d4d4c;">) (</span><span style="color:#8959a8;">set </span><span style="color:#f5871f;">0 1 2 3</span><span style="color:#4d4d4c;">)) </span><span style="color:#999999;"># Evaluates to (set 1 2)
</span></code></pre>
<p>The difference of two sets or more is the set containing all elements in the first set that aren't in the other sets.</p>
<pre style="background-color:#ffffff;">
<code class="language-phel" data-lang="phel"><span style="color:#4d4d4c;">(difference (</span><span style="color:#8959a8;">set </span><span style="color:#f5871f;">1 2</span><span style="color:#4d4d4c;">) (</span><span style="color:#8959a8;">set </span><span style="color:#f5871f;">0 3</span><span style="color:#4d4d4c;">)) </span><span style="color:#999999;"># Evaluates to (set 1 2)
</span><span style="color:#4d4d4c;">(difference (</span><span style="color:#8959a8;">set </span><span style="color:#f5871f;">1 2</span><span style="color:#4d4d4c;">) (</span><span style="color:#8959a8;">set </span><span style="color:#f5871f;">0 1 2 3</span><span style="color:#4d4d4c;">)) </span><span style="color:#999999;"># Evaluates to (set)
</span><span style="color:#4d4d4c;">(difference (</span><span style="color:#8959a8;">set </span><span style="color:#f5871f;">0 1 2 3</span><span style="color:#4d4d4c;">) (</span><span style="color:#8959a8;">set </span><span style="color:#f5871f;">1 2</span><span style="color:#4d4d4c;">)) </span><span style="color:#999999;"># Evaluates to (set 0 3)
</span></code></pre>
<p>The symmetric difference of two sets or more is the set of elements which are in either of the sets and not in their intersection.</p>
<pre style="background-color:#ffffff;">
<code class="language-phel" data-lang="phel"><span style="color:#4d4d4c;">(symmetric-difference (</span><span style="color:#8959a8;">set </span><span style="color:#f5871f;">1 2</span><span style="color:#4d4d4c;">) (</span><span style="color:#8959a8;">set </span><span style="color:#f5871f;">0 3</span><span style="color:#4d4d4c;">)) </span><span style="color:#999999;"># Evaluates to (set 0 1 2 3)
</span><span style="color:#4d4d4c;">(symmetric-difference (</span><span style="color:#8959a8;">set </span><span style="color:#f5871f;">1 2</span><span style="color:#4d4d4c;">) (</span><span style="color:#8959a8;">set </span><span style="color:#f5871f;">0 1 2 3</span><span style="color:#4d4d4c;">)) </span><span style="color:#999999;"># Evaluates to (set 0 3)
</span></code></pre><h2 id="data-structures-are-functions">Data structures are functions<a class="zola-anchor" href="#data-structures-are-functions" aria-label="Anchor link for: data-structures-are-functions">#</a>
</h2>
<p>In Phel all data structures can also be used as functions.</p>
<pre style="background-color:#ffffff;">
<code class="language-phel" data-lang="phel"><span style="color:#4d4d4c;">((</span><span style="color:#8959a8;">list </span><span style="color:#f5871f;">1 2 3</span><span style="color:#4d4d4c;">) </span><span style="color:#f5871f;">0</span><span style="color:#4d4d4c;">) </span><span style="color:#999999;"># Same as (get (list 1 2 3) 0)
</span><span style="color:#4d4d4c;">([</span><span style="color:#f5871f;">1 2 3</span><span style="color:#4d4d4c;">] </span><span style="color:#f5871f;">0</span><span style="color:#4d4d4c;">) </span><span style="color:#999999;"># Same as (get [1 2 3] 0)
</span><span style="color:#4d4d4c;">({</span><span style="color:#3e999f;">:a </span><span style="color:#f5871f;">1 </span><span style="color:#3e999f;">:b </span><span style="color:#f5871f;">2</span><span style="color:#4d4d4c;">} </span><span style="color:#3e999f;">:a</span><span style="color:#4d4d4c;">) </span><span style="color:#999999;"># Same as (get {:a 1 :b 2} :a)
</span><span style="color:#4d4d4c;">((</span><span style="color:#8959a8;">set </span><span style="color:#f5871f;">1 2 3</span><span style="color:#4d4d4c;">) </span><span style="color:#f5871f;">1</span><span style="color:#4d4d4c;">)
</span></code></pre><h2 id="transients">Transients<a class="zola-anchor" href="#transients" aria-label="Anchor link for: transients">#</a>
</h2>
<p>Nearly all persistent data structures have a transient version (except for Persistent List). The transient version of each persistent data structure is a mutable version of them. It store the value in the same way as the persistent version but instead of returning a new persistent version with every modification it modifies the current version. Transient versions are a little bit faster and can be used as builders for new persistent collections. Since transients use the same underlying storage it is very fast to convert a persistent data structure to a transient and back.</p>
<p>For example, if we want to convert a PHP Array to a persistent map. This function can be used:</p>
<pre style="background-color:#ffffff;">
<code class="language-phel" data-lang="phel"><span style="color:#4d4d4c;">(</span><span style="color:#8959a8;">defn</span><span style="color:#4d4d4c;"> php-array-to-map
  </span><span style="color:#718c00;">&quot;Converts a PHP Array to a map.&quot;
  </span><span style="color:#4d4d4c;">[arr]
  (</span><span style="color:#8959a8;">let </span><span style="color:#4d4d4c;">[res (transient {})] </span><span style="color:#999999;"># Convert a persistent data to a transient
    </span><span style="color:#4d4d4c;">(</span><span style="color:#8959a8;">foreach </span><span style="color:#4d4d4c;">[k v arr]
      (put res k v))  </span><span style="color:#999999;"># Fill the transient map (mutable)
    </span><span style="color:#4d4d4c;">(persistent res))) </span><span style="color:#999999;"># Convert the transient map to a persistent map.
</span></code></pre>


        <footer>
    &copy; <time datetime="2020">2020</time> Jens Haase
    <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;legal&#x2F;disclosure&#x2F;">Legal Disclosure</a> | <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;legal&#x2F;data-protection&#x2F;">Data protection</a>
</footer>
    </div>
</div>

</body>

</html>
